<!DOCTYPE HTML>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script type="text/javascript">
  window.onload = function () {
    var data = {{happyHourlyReport | safe}};
    setInterval(updateGraph, 1000);
    function updateGraph() {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          data = JSON.parse(this.responseText);
          var chart = new CanvasJS.Chart("chartContainer",
            {
              title: {
                text: "Happiness ratio"
                   },
              axisX: {
                title: "Day time",
                titleFontFamily: "comic sans ms"
              },
              data: [
              {
                type: "column",
                dataPoints: data
              }
              ]
            });
            chart.render();
        }
      };
      xhttp.open("GET", "http://localhost:8000/app/graph", true);
      xhttp.send();
    }
}
  </script>
 <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
</head>
<body>
  <div id="chartContainer" style="height: 300px; width: 100%;">
  </div>
</body>
</html>